<div class="main-container">
  <h2 style="text-align: center; margin: 0;">View sales</h2>

  <div class="header-section">
    <app-beat-info [beatId]="beatId"></app-beat-info>
    <div class="filter-section">
      <mat-form-field>
        <mat-label>Choose a date</mat-label>
        <input matInput [(ngModel)]="selectedDate" [matDatepicker]="datepicker" />
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="datepicker"></mat-datepicker-toggle>
        <mat-datepicker #datepicker>
          <mat-datepicker-actions>
            <button mat-button matDatepickerCancel>Cancel</button>
            <button mat-raised-button matDatepickerApply (click)="fetchSales()">Apply</button>
          </mat-datepicker-actions>
        </mat-datepicker>
      </mat-form-field>
    </div>
  </div>

  <div class="sub-header-section">
    <h3>Total amount: {{totalAmount}}</h3>
    <h3>Total amount received: {{totalAmountReceived}}</h3>
    <h3>Total Discount: {{discount}}</h3>
  </div>

  <div class="salestable">
    <table mat-table [dataSource]="salesSource" class="mat-elevation-z8">

      <ng-container matColumnDef="sl_no">
        <th mat-header-cell *matHeaderCellDef>SL no</th>
        <td mat-cell *matCellDef="let element; let i=index">{{i + 1}}</td>
      </ng-container>
  
      <ng-container matColumnDef="customer">
        <th mat-header-cell *matHeaderCellDef>Customer</th>
        <td mat-cell *matCellDef="let element">{{element.customer}}</td>
      </ng-container>
  
      <ng-container matColumnDef="received_amount">
        <th mat-header-cell *matHeaderCellDef>Amount</th>
        <td mat-cell *matCellDef="let element">{{element.received_amount}}</td>
      </ng-container>
  
      <ng-container matColumnDef="recorded_by">
        <th mat-header-cell *matHeaderCellDef>Sale by</th>
        <td mat-cell *matCellDef="let element">{{element.recorded_by}}</td>
      </ng-container>
  
      <ng-container matColumnDef="discount">
          <th mat-header-cell *matHeaderCellDef>Discount</th>
          <td mat-cell *matCellDef="let element">{{element.discount}}</td>
      </ng-container>
  
  
      <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Date</th>
          <td mat-cell *matCellDef="let element">{{element.recorded_at}}</td>
        </ng-container>
  
      <ng-container matColumnDef="note">
        <th mat-header-cell *matHeaderCellDef>Note</th>
        <td mat-cell *matCellDef="let element">{{element.note}}</td>
      </ng-container>
  
      <ng-container matColumnDef="more">
        <th mat-header-cell *matHeaderCellDef>More</th>
        <td mat-cell *matCellDef="let element">
          <span (click)="openMoreInfoWindow(element)" class="material-symbols-outlined">info</span>
        </td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="salesSourceColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: salesSourceColumns;"></tr>
    </table>
  </div>

</div>
