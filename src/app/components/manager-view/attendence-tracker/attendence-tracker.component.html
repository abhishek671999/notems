<div class="main-container">
    <!-- <div>
        <div>{{ currentTime | date: 'hh:mm:ss a' }}</div>
        <button *ngIf="!isClockedIn" mat-raised-button (click)="clockIn()">Punch in</button>
        <button *ngIf="isClockedIn" mat-raised-button (click)="clockOut()">Punch out</button>
    </div>
    <div>
        <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d3699.384095066247!2d77.51962502328236!3d12.94941814767192!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sin!4v1721832483552!5m2!1sen!2sin" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
    <div>
        <full-calendar [options]="calendarOptions"></full-calendar>
    </div>
    <div>
        <button (click)="applyLeave()" mat-raised-button>Appy Leave</button>
    </div> -->

    <div class="attendence">
        <h2 style="text-align: center;">Today's attendence</h2>
        <table mat-table [dataSource]="attendenceDataSource" class="mat-elevation-z8 demo-table">
            <!-- Position Column -->
            <ng-container matColumnDef="sl_no">
              <th mat-header-cell *matHeaderCellDef>Sl No.</th>
              <td mat-cell *matCellDef="let element; let i=index">{{i + 1}}</td>
            </ng-container>
          
            <!-- Name Column -->
            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef>Date</th>
              <td mat-cell *matCellDef="let element">{{element.date}}</td>
            </ng-container>
          
            <!-- Weight Column -->
            <ng-container matColumnDef="user">
              <th mat-header-cell *matHeaderCellDef>User</th>
              <td mat-cell *matCellDef="let element">{{element.user}}</td>
            </ng-container>
          
            <!-- Symbol Column -->
            <ng-container matColumnDef="punch_in">
              <th mat-header-cell *matHeaderCellDef>Punch in</th>
              <td mat-cell *matCellDef="let element"><span (click)="openLocationScreen(element.punch_in_location)" >{{element.punch_in}}</span></td>
            </ng-container>

            <ng-container matColumnDef="punch_out">
                <th mat-header-cell *matHeaderCellDef>Punch out</th>
                <td mat-cell *matCellDef="let element"><span (click)="openLocationScreen(element.punch_out_location)" >{{element.punch_out}}</span></td>
              </ng-container>
          
            <tr mat-header-row *matHeaderRowDef="attendenceTableColumn"></tr>
            <tr mat-row *matRowDef="let row; columns: attendenceTableColumn;"></tr>
        </table>
    </div>
    <mat-divider></mat-divider>
    <div class="leave-management">
      <h2 style="text-align: center;">Leave management</h2>
      <table mat-table [dataSource]="leaveDataSource" class="mat-elevation-z8 demo-table">
        <ng-container matColumnDef="sl_no">
          <th mat-header-cell *matHeaderCellDef>Sl No.</th>
          <td mat-cell *matCellDef="let element; let i=index">{{i + 1}}</td>
        </ng-container>
      
        <ng-container matColumnDef="user">
          <th mat-header-cell *matHeaderCellDef>User</th>
          <td mat-cell *matCellDef="let element">{{element.user}}</td>
        </ng-container>
      
        <ng-container matColumnDef="leave_type">
          <th mat-header-cell *matHeaderCellDef>Leave type</th>
          <td mat-cell *matCellDef="let element">{{element.type}}</td>
        </ng-container>
      
        <ng-container matColumnDef="from_date">
          <th mat-header-cell *matHeaderCellDef>From date</th>
          <td mat-cell *matCellDef="let element">{{element.from_date}}</td>
        </ng-container>

        <ng-container matColumnDef="to_date">
            <th mat-header-cell *matHeaderCellDef>To date</th>
            <td mat-cell *matCellDef="let element">{{element.to_date}}</td>
        </ng-container>

        <ng-container matColumnDef="reason">
          <th mat-header-cell *matHeaderCellDef>Reason</th>
          <td mat-cell *matCellDef="let element">{{element.reason}}</td>
        </ng-container>

        <ng-container matColumnDef="approve">
          <th mat-header-cell *matHeaderCellDef>Approve</th>
          <td mat-cell *matCellDef="let element"><button *ngIf="element.status.toLowerCase() != 'approved' && element.status.toLowerCase() != 'rejected'" (click)="apporveLeave(element)" mat-raised-button>Approve</button><p *ngIf="element.status.toLowerCase() == 'approved'">Approved</p></td>
        </ng-container>

        <ng-container matColumnDef="reject">
          <th mat-header-cell *matHeaderCellDef>Reject</th>
          <td mat-cell *matCellDef="let element"><button *ngIf="element.status.toLowerCase() == 'pending'" (click)="rejectLeave(element)" mat-raised-button>Reject</button><p *ngIf="element.status.toLowerCase() == 'rejected'">Rejected</p></td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="leaveTableColumn"></tr>
        <tr mat-row *matRowDef="let row; columns: leaveTableColumn;"></tr>
      </table>
    </div>
</div>
